%!TEX root = ../template.tex
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% chapter4.tex
%% NOVA thesis document file
%%
%% Chapter with lots of dummy text
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\typeout{NT FILE chapter4.tex}%

\chapter{Design}
\label{cha:test}

In this chapter, we present the design of our system and discuss alternatives to the decisions we took in our implementation.
A modular approach was adopted to construct the system;
each module is entirely independent, making it easy to interchange alternative approaches.
We dedicate the first half of this chapter to define the goals that guided the design of system,
the remainder of the chapter will be used to discuss each module in sequence.

\section{Discussion} % (fold)
\label{sec:discussion}

Recall that the problem we are trying to solve is how to make the process of updating contracts in
microservice-based systems more robust, in the sense that it should be harder to deploy a service that could
potentially break the system soundness.
There are many approaches to solve this problem, each with its own set of compromises.
The goals that informed our decisions, are outlined below by their priority:

\begin{itemize}
    \item Supporting all types of contract changes
    \item Integration with existing tools and workflows
    \item Minimize conception and maintenance effort
    \item Automatic validation of the safety of deployment operations
    \item Transactionless deployment and upgrade of service contracts
    \item No downtime when upgrading service contracts
    \item No overhead when services communicate using the same contract version
\end{itemize}

When assigning weight to each compromise, we evaluated three factors:
Flexibility: the applicability of the approach under diverse scenarios;
Utility: the effort required to adopt and maintain the approach;
Performance: the overhead associated with approach;

In the prototype's design, we prioritized utility above performance because,
in the common case, each service will communicate via up-to-date contracts and
because the effort associated with adopting an approach will be proportional to the complexity and size of a contract and its evolution,
whereas the performance overhead will remain mostly static under diverse contract changes, as it is largely attributable to communication costs.
We prioritized flexibility above all other factors because if an approach isn't applicable under a scenario,
then it will be necessary to adopt hybrid solutions, which will have a detrimental effect on the utility of the entire solution.

\section{Specification} % (fold)
\label{sec:specification}

\paragraph{Description}
It is required that each microserviceâ€™s interface be
described in a high-level language which abstracts away implementation details, because it is common
for microservices to be implemented under different frameworks and programming languages.
We use these interface specifications to clearly define and document the capabilities and dependencies of a service.

\paragraph{Approach}
Because most API definition frameworks do not enable the explicit declaration of dependencies between services,
and because external specifications would add effort to the working team, we solely utilize contracts to express the capabilities of a service.
We detect service dependencies indirectly by examining request logs between services, in automated manner.

\paragraph{Other Approaches}
The explicit definition of service dependencies has two benefits: it allows for the automatic removal of un-utilized adapters without developer intervention,
and it allows developers to clearly see the impact of a contract change on the entire system, as well as the effort required to support the change.
We considered that these benefits do not out weight the cost off the added documentation effort and that implicit detection of service
dependencies gives a clear enough view of the system topology.

\section{Evolution} % (fold)
\label{sec:evolution}

\paragraph{Description}
\paragraph{Approach}
\paragraph{Other Approaches}

\section{Validation} % (fold)
\label{sec:validation}

\paragraph{Description}
\paragraph{Approach}
\paragraph{Other Approaches}

\section{Adaptation} % (fold)
\label{sec:adaptation}

\paragraph{Description}
\paragraph{Approach}
\paragraph{Other Approaches}

\section{Management} % (fold)
\label{sec:management}

\paragraph{Description}
\paragraph{Approach}
\paragraph{Other Approaches}